<div><style type="text/css">[data-name=xaxis]{font-size:.8em}[data-name=yaxis]{font-size:.8em}.pdl-layout>div[data-type=layout]{display:grid;grid-template-columns:fit-content(2em) 1fr fit-content(10em);grid-template-rows:1fr fit-content(1em);padding:0 .5em}.pdl-layout>div[data-type=layout]>.pdl-cell[data-name=legend]{grid-column:3;grid-row:1/span 2;padding-left:1em}.pdl-layout.legend-bottom>div[data-type=layout]{grid-template-columns:2em 1fr;grid-template-rows:1fr fit-content(2em) fit-content(3em)}.pdl-layout.legend-bottom>div[data-type=layout] .pdl-cell[data-name=legend]{padding-top:1em;grid-column:1/span 2;grid-row:3}.pdl-layout.xaxis-center>div[data-type=layout]{grid-template-columns:fit-content(2em) 1fr fit-content(10em);grid-template-rows:1fr;grid-template-areas:"r1c1 r1c2 r1c3"}.pdl-layout.xaxis-center>div[data-type=layout] .pdl-cell[data-name=view]{grid-area:r1c2}.pdl-layout.xaxis-center>div[data-type=layout] .pdl-cell[data-name=legend]{grid-area:r1c3}.pdl-layout.xaxis-center>div[data-type=layout] .pdl-cell[data-name=yaxis]{grid-area:r1c1}.pdl-layout.xaxis-center>div[data-type=layout] .pdl-cell[data-name=xaxis]{grid-area:r1c2}.pdl-layout.yaxis-center>div[data-type=layout]{grid-template-columns:1fr fit-content(10em);grid-template-rows:1fr fit-content(3em);grid-template-areas:"r1c1 r1c2" "r2c1 r1c2"}.pdl-layout.yaxis-center>div[data-type=layout] .pdl-cell[data-name=view]{grid-area:r1c1}.pdl-layout.yaxis-center>div[data-type=layout] .pdl-cell[data-name=legend]{grid-area:r1c2}.pdl-layout.yaxis-center>div[data-type=layout] .pdl-cell[data-name=yaxis]{grid-area:r1c1}.pdl-layout.yaxis-center>div[data-type=layout] .pdl-cell[data-name=xaxis]{grid-area:r2c1}.pdl-layout.xaxis-center.legend-bottom>div[data-type=layout]{grid-template-columns:fit-content(2em) 1fr;grid-template-rows:1fr fit-content(3em);grid-template-areas:"r1c1 r1c2" "r2c1 r2c2"}.pdl-layout.xaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=view]{grid-area:r1c2}.pdl-layout.xaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=legend]{grid-area:r2c2}.pdl-layout.xaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=yaxis]{grid-area:r1c1}.pdl-layout.xaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=xaxis]{grid-area:r1c2}.pdl-layout.yaxis-center.legend-bottom>div[data-type=layout]{grid-template-columns:1fr;grid-template-rows:1fr fit-content(2em) fit-content(3em);grid-template-areas:"r1c1" "r2c1" "r3c1"}.pdl-layout.yaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=view]{grid-area:r1c1}.pdl-layout.yaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=legend]{grid-area:r3c1}.pdl-layout.yaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=yaxis]{grid-area:r1c1}.pdl-layout.yaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=xaxis]{grid-area:r2c1}.pdl-layout.xaxis-center.yaxis-center>div[data-type=layout]{grid-template-columns:1fr fit-content(10em);grid-template-rows:1fr;grid-template-areas:"r1c1 r1c2"}.pdl-layout.xaxis-center.yaxis-center>div[data-type=layout] .pdl-cell[data-name=view]{grid-area:r1c1}.pdl-layout.xaxis-center.yaxis-center>div[data-type=layout] .pdl-cell[data-name=legend]{grid-area:r1c2}.pdl-layout.xaxis-center.yaxis-center>div[data-type=layout] .pdl-cell[data-name=yaxis]{grid-area:r1c1}.pdl-layout.xaxis-center.yaxis-center>div[data-type=layout] .pdl-cell[data-name=xaxis]{grid-area:r1c1}.pdl-layout.xaxis-center.yaxis-center.legend-bottom>div[data-type=layout]{grid-template-columns:1fr;grid-template-rows:1fr fit-content(3em);grid-template-areas:"r1c1" "r2c1"}.pdl-layout.xaxis-center.yaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=view]{grid-area:r1c1}.pdl-layout.xaxis-center.yaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=legend]{grid-area:r2c1}.pdl-layout.xaxis-center.yaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=yaxis]{grid-area:r1c1}.pdl-layout.xaxis-center.yaxis-center.legend-bottom>div[data-type=layout] .pdl-cell[data-name=xaxis]{grid-area:r1c1}.pdl-layout.xaxis-center .pdl-cell[data-name=xaxis]{position:absolute;inset:0;margin:auto;height:fit-content}.pdl-layout.yaxis-center .pdl-cell[data-name=yaxis]{position:absolute;inset:0;margin:auto;width:fit-content}</style><script type="@plotdb/block">var getLabelForce,_corr,mod;getLabelForce=function(y){var l,R,t;l=function(t,e,n){if(t<e){return e}else if(t>n){return n}else{return t}};R=function(t,e,n){var r,a,i,s,o,u;r=(n.w||0)/2;a=(n.h||0)/2;i=n.x-r;s=n.x+r;o=n.y-a;u=n.y+a;return[l(t,i,s),l(e,o,u)]};t=function(t){var m,g,v,b,w,k,M,N,a,i,u,l,p,z,A,C,B,d,e,s,o,c,f,h,n;t==null&&(t={});m=t.getPx||function(t){return t.data.px};g=t.getPy||function(t){return t.data.py};v=t.getPr||function(t){return t.data.radius};b=t.bandMargin||5;w=t.rectPad||2;k=t.circlePad||0;M=t.kBand||.35;N=t.kCollide||.7;a=t.itRect||2;i=t.itCircle||1;u=t.kAlignx||.12;l=t.alignDeadband||1;p=t.canvasW||800;z=t.canvasH||600;A=t.boundsPad||0;C=t.kBounds||.9;B=null;d=null;e=function(){var a;return d=function(){var t,e,n,r=[];for(t=0,n=(e=B).length;t<n;++t){a=e[t];r.push({x:+m(a),y:+g(a),r:+v(a)})}return r}()};s=function(t){var e,n,r,a,i,s,o,u,l,d,c,f,h,y,x,p=[];for(e=0,r=(n=B).length;e<r;++e){a=n[e];i=+m(a);s=+g(a);o=+v(a);u=o+b;l=R(i,s,a),d=l[0],c=l[1];f=d-i;h=c-s;y=Math.hypot(f,h);if(y===0){f=a.x-i;h=a.y-s;if(f===0&&h===0){f=(Math.random()-.5)*1e-6;h=(Math.random()-.5)*1e-6}y=Math.hypot(f,h)}if(y<u){x=(u-y)/y*(M*t);a.vx=(a.vx||0)+f*x;p.push(a.vy=(a.vy||0)+h*x)}else if(y>u){x=(y-u)/y*(M*t);a.vx=(a.vx||0)-f*x;p.push(a.vy=(a.vy||0)-h*x)}}return p};o=function(t){var e,n,r,a,i,s,o=[];if(!(u>0)){return}for(e=0,r=(n=B).length;e<r;++e){a=n[e];i=+m(a);s=i-a.x;if(Math.abs(s)>l){o.push(a.vx=(a.vx||0)+s*u*t)}}return o};c=function(x){var t,e,n,r,p,m,g,v,b,k,M,a=[];t=y.quadtree().x(function(t){return t.x}).y(function(t){return t.y}).addAll(B);for(e=0,r=(n=B).length;e<r;++e){p=n[e];m=(p.w||0)/2+w;g=(p.h||0)/2+w;v=p.x-(m+200);b=p.y-(g+200);k=p.x+(m+200);M=p.y+(g+200);a.push(t.visit(i))}return a;function i(t,e,n,r,a){var i,s,o,u,l,d,c,f,h,y;i=t.data;if(i!=null&&i!==p){s=(i.w||0)/2+w;o=(i.h||0)/2+w;u=i.x-p.x;l=i.y-p.y;if(Math.abs(u)<m+s&&Math.abs(l)<g+o){d=m+s-Math.abs(u);c=g+o-Math.abs(l);if(d<c){f=u>=0?1:-1;h=d*f;y=N*x*.5;p.vx=(p.vx||0)-h*y;i.vx=(i.vx||0)+h*y}else{f=l>=0?1:-1;h=c*f;y=N*x*.5;p.vy=(p.vy||0)-h*y;i.vy=(i.vy||0)+h*y}}}return e>k||r<v||n>M||a<b}};f=function(x){var t,e,n,r,p,a,i,m,g,v,b,s=[];t=y.quadtree().x(function(t){return t.x}).y(function(t){return t.y}).addAll(d);for(e=0,r=(n=B).length;e<r;++e){p=n[e];a=(p.w||0)/2;i=(p.h||0)/2;m=p.x-(a+300);g=p.y-(i+300);v=p.x+(a+300);b=p.y+(i+300);s.push(t.visit(o))}return s;function o(t,e,n,r,a){var i,s,o,u,l,d,c,f,h,y;i=t.data;if(i!=null){s=R(i.x,i.y,p),o=s[0],u=s[1];l=o-i.x;d=u-i.y;c=Math.hypot(l,d);f=i.r+k;if(c<f){if(c===0){l=p.x-i.x;d=p.y-i.y;if(l===0&&d===0){l=(Math.random()-.5)*1e-6;d=(Math.random()-.5)*1e-6}c=Math.hypot(l,d)}h=f-c;y=N*x;p.vx=(p.vx||0)+l/c*h*y;p.vy=(p.vy||0)+d/c*h*y}}return e>v||r<m||n>b||a<g}};h=function(t){var e,n,r,a,i,s,o,u,l,d,c,f,h,y,x=[];e=A;n=A;r=p-A;a=z-A;for(i=0,o=(s=B).length;i<o;++i){u=s[i];l=(u.w||0)/2;d=(u.h||0)/2;c=u.x-l-e;if(c<0){u.vx=(u.vx||0)-c*C*t}f=u.x+l-r;if(f>0){u.vx=(u.vx||0)-f*C*t}h=u.y-d-n;if(h<0){u.vy=(u.vy||0)-h*C*t}y=u.y+d-a;if(y>0){x.push(u.vy=(u.vy||0)-y*C*t)}}return x};n=function(t){var e,n,r;if(!(B!=null&&B.length)){return}s(t);o(t);for(e=0,n=a;e<n;++e){r=e;c(t)}for(e=0,n=i;e<n;++e){r=e;f(t)}h(t)};n.initialize=function(t){B=t;e()};n.updateCircles=function(){e();return n};return n};return t};module.exports={pkg:{extend:{name:"@makechart/base"},dependencies:[]},init:function(t){var e,n,r,a;e=t.root,n=t.context,r=t.t,a=t.pubsub;return a.fire("init",{mod:mod({context:n,t:r})})}};_corr=function(t){var e,r,a,i,n,s,o,u,l,d,c,f;e=[t.map(function(t){return t.x}),t.map(function(t){return t.y})],r=e[0],a=e[1];if((i=r.length)<=0){return[0,0]}n=r.reduce(function(t,e){return t+e},0);s=a.reduce(function(t,e){return t+e},0);o=r.reduce(function(t,e){return t+e*e},0);u=a.reduce(function(t,e){return t+e*e},0);l=function(){var t,e,n=[];for(t=0,e=i;t<e;++t){d=t;n.push(r[d]*a[d])}return n}().reduce(function(t,e){return t+e},0);c=l-n*s/i;f=o-n*n/i;if(!f){return[0,0]}return[(s*o/i-n*l/i)/f,c/f]};mod=function(t){var e,n,r,x,a;e=t.context,n=t.t;r=e.chart,x=e.d3,a=e.debounce;return{sample:function(){return{raw:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300].map(function(t){var e,n;e=Math.floor(Math.random()*5);n=e===0?{x:Math.round(Math.random()*100),y:Math.round(Math.random()*100),s:Math.round(Math.random()*3)+3}:e===1?{x:Math.round(Math.random()*50+50),y:Math.round(Math.random()*50+50),s:Math.round(Math.random()*7)+2}:e===2?{x:Math.round(Math.random()*30+20),y:Math.round(Math.random()*60+40),s:Math.round(Math.random()*2)+3}:e===3?{x:Math.round(Math.random()*80+20),y:Math.round(Math.random()*30+30),s:Math.round(Math.random()*2)+2}:e===4?{x:Math.round(Math.random()*30+10),y:Math.round(Math.random()*30+10),s:Math.round(Math.random()*3)+4}:void 8;return n.name="Node "+t,n.c=["Apple","Banana","Peach","Melon","Orange"][e],n.o=t,n}),binding:{x:{key:"x",unit:"KM"},y:{key:"y",unit:"KG"},size:{key:"s",unit:"Days"},cat:{key:"c"},name:{key:"name"},order:{key:"o"}}}},config:import$(import$({legend:import$({},r.utils.config.preset.legend),tip:import$({},r.utils.config.preset.tip),xaxis:JSON.parse(JSON.stringify(r.utils.config.preset.axis)),yaxis:JSON.parse(JSON.stringify(r.utils.config.preset.axis))},r.utils.config.preset["default"]),{dot:{minRadius:{name:"min radius",type:"number",default:1,min:0,max:100,step:.1},maxRadius:{name:"max radius",type:"number",default:6,min:.1,max:100,step:.1},opacity:{type:"number",default:.75,min:0,max:1,step:.01},stroke:{type:"color",default:"#000"},strokeWidth:{type:"number",default:1,min:0,max:100,step:.5}},trend:{enabled:{type:"boolean",default:false},stroke:{type:"color",default:"rgba(0,0,0,.3)"},strokeWidth:{type:"number",default:1,min:0,max:100,step:.5},strokeDasharray:{type:"text",default:"5 5"},opacity:{type:"number",default:.5,min:0,max:1,step:.01},mode:{type:"choice",values:["curve","linear"],default:"linear"},cap:{type:"choice",values:["butt","round","square"],default:"round"},join:{type:"choice",values:["bevel","miter","round"],default:"round"}},regression:{enabled:{type:"boolean",default:true},stroke:{type:"color",default:"#000"},strokeWidth:{type:"number",default:1,min:0,max:100,step:.5},strokeDasharray:{type:"text",default:"5 5"},opacity:{type:"number",default:.5,min:0,max:1,step:.01}}}),dimension:{name:{type:"NC",name:"name"},label:{type:"N",name:"label",desc:"text dedicated for showing in label. name will be used if omitted"},cat:{type:"C",name:"category"},size:{type:"R",name:"size"},x:{type:"R",name:"X coordinate"},y:{type:"R",name:"Y coordinate"},order:{type:"O",name:"Order"}},init:function(){var e,t,a=this;this.labelForce=getLabelForce(x);this.tint=e=new r.utils.tint;this.sim=x.forceSimulation();this.g=Object.fromEntries(["view","xaxis","yaxis","legend"].map(function(t){return[t,x.select(a.layout.getGroup(t))]}));this.regression=this.g.view.append("line").attr("opacity",0).attr("class","regression");this.trend=this.g.view.append("path").attr("opacity",0).attr("class","trend");this.trendAni=this.trend.append("animate").attr("attributeName","stroke-dashoffset").attr("repeatCount","indefinite").attr("dur","1s").attr("values","0;1").attr("times","0;1");this.scale=t={};this.yaxis=new r.utils.axis({layout:this.layout,name:"yaxis",direction:"left"});this.xaxis=new r.utils.axis({layout:this.layout,name:"xaxis",direction:"bottom"});this.line=x.line().defined(function(t){return!(isNaN(t.y)||isNaN(t.x))}).x(function(t){return a.scale.x(t.x)}).y(function(t){return a.scale.y(t.y)});this.legend=new r.utils.legend({layout:this.layout,name:"legend",root:this.root,shape:function(t){return x.select(this).attr("fill",e.get(t.key))}});this.legend.on("select",function(){a.bind();a.resize();return a.render()});return this.tip=new r.utils.tip({root:this.root,accessor:function(t){var e,n,r;e=t.evt;if(!(e.target&&(n=x.select(e.target).datum()))){return null}r=isNaN(n.size)?"-":x.format(a.cfg.tip.format||".3s")(n.size)+""+(((a.binding||{}).size||{}).unit||"");return{name:[n.cat!=null?n.cat+" / ":"",n.name||"",n.order?" / "+n.order:""].join(""),value:r}},range:function(){return a.layout.getNode("view").getBoundingClientRect()}})},destroy:function(){if(this.tip){return this.tip.destroy()}},parse:function(){this.parsed=this.data.map(function(t){var e;e=import$({},t);e.size=isNaN(t.size)?0:t.size;e.x=isNaN(t.x)?0:t.x;e.y=isNaN(t.y)?0:t.y;return e});return this.parsed.sort(function(t,e){if(t.size<e.size){return-1}else if(t.size>e.size){return 1}else{return 0}})},resize:function(){var t,n,e,r,h,a,i,s,o,y=this;t=/(\d+)(\D+)/.exec((this.cfg.label||{}).cap);if(t){n=+t[1];if(t[2]==="ï¹ª"){n=Math.round(n*this.parsed.length/100)}}else{n=this.parsed.length}this.parsed.map(function(t,e){return t.labelCapped=e>n});this.nodes=this.parsed.map(function(t){var e;e={data:t};t.node=e;return e});this.tint.set(this.cfg.palette);this.tip.toggle(((e=this.cfg).tip||(e.tip={})).enabled!=null?this.cfg.tip.enabled:true);this.line.curve(this.cfg.trend.mode==="curve"?x.curveCatmullRom:x.curveLinear);this.root.querySelector(".pdl-layout").classList.toggle("legend-bottom",this.cfg.legend.position==="bottom");this.root.querySelector(".pdl-layout").classList.toggle("xaxis-center",this.cfg.xaxis.center===true);this.root.querySelector(".pdl-layout").classList.toggle("yaxis-center",this.cfg.yaxis.center===true);this.legend.config(this.cfg.legend);r=!this.binding.cat?[]:Array.from(new Set(this.parsed.map(function(t){return t.cat}))).map(function(t){return{key:t,text:t}});this.legend.data(r);this.layout.update(false);h={y:x.extent(this.parsed.map(function(t){return t.y})),x:x.extent(this.parsed.map(function(t){return t.x})),s:x.extent(this.parsed.map(function(t){return t.size}))};a=function(){var t,e,n,r,a,i,s,o,u,l,d,c,f;y.layout.update(false);t=y.layout.getBox("view");e=(y.cfg.dot.maxRadius||6)*t.width*.2/100;n=(y.cfg.dot.minRadius||0)*t.width*.2/100;r=e+y.cfg.dot.strokeWidth;y.scale.s=x.scaleSqrt().domain(h.s).range([n,e]);y.scale.y=x.scaleLinear().domain(h.y).range([t.height-r,r]);a=(i=Math.ceil(y.layout.getBox("yaxis").height/16))>2?i:2;s=y.scale.y.ticks((i=((o=y.cfg).xaxis||(o.xaxis={})).tick.count||4)<a?i:a);u=y.binding.y||{};y.yaxis.config(y.cfg.yaxis);y.yaxis.ticks(s);y.yaxis.scale(y.scale.y);l=y.cfg.yaxis.caption.text||u.name||u.key||"";if(u.unit){l+="("+u.unit+")"}y.yaxis.caption(l);y.yaxis.render();y.scale.x=x.scaleLinear().domain(h.x).range([r,t.width-r]);a=(i=Math.ceil(y.layout.getBox("xaxis").width/80))>2?i:2;d=y.scale.x.ticks((i=((o=y.cfg).xaxis||(o.xaxis={})).tick.count||4)<a?i:a);c=y.binding.x||{};y.xaxis.config(y.cfg.xaxis);y.xaxis.ticks(d);y.xaxis.scale(y.scale.x);f=y.cfg.xaxis.caption.text||c.name||c.key||"";if(c.unit){f+="("+c.unit+")"}y.xaxis.caption(f);return y.xaxis.render()};for(i=0;i<2;++i){s=i;a()}this.parsed.map(function(t){var e;t.radius=y.binding.size!=null?(e=y.scale.s(t.size))>1?e:1:(e=y.cfg.dot.maxRadius/2)>1?e:1;t.px=y.scale.x(t.x);return t.py=y.scale.y(t.y)});this.sim.nodes(this.nodes);o=this.layout.getBox("view");if((this.cfg.label||{}).enabled){this.sim.force("label",this.labelForce({bandMargin:0,rectPad:2,circlePad:2,kBand:2.35,kCollide:13.7,itRect:2,itCircle:1,kAlignx:.02,alignDeadband:1,canvasW:o.width,canvasH:o.height,boundsPad:4,kBounds:.9}));this.sim.alpha(1).alphaDecay(.03).velocityDecay(.4);return this.sim.restart()}},render:function(){var t,e,n,r,a,i,s,o,u,l,d,c,f,h,y,x,p,m,g=this;t=this.data,e=this.line,n=this.binding,r=this.scale,a=this.tint,i=this.legend,s=this.cfg;o=this.g.view.selectAll("circle.data").data(this.parsed);o.exit().remove();o.enter().append("circle").attr("class","data").attr("r",0).attr("cx",function(t){return r.x(t.x)}).attr("cy",function(t){return r.y(t.y)}).attr("fill",function(t){return a.get(t.cat!=null?t.cat:"")}).attr("stroke",function(t){return s.dot.stroke}).attr("strokeWidth",function(t){return s.dot.strokeWidth});this.g.view.selectAll("circle.data").transition().duration(350).attr("r",function(t){return t.radius}).attr("cx",function(t){return r.x(t.x)}).attr("cy",function(t){return r.y(t.y)}).attr("fill",function(t){return a.get(t.cat!=null?t.cat:"")}).attr("opacity",function(t){var e;if(!(n.cat!=null)||i.isSelected(t.cat)){return(e=s.dot.opacity)>.1?e:.1}else{return.1<(e=s.dot.opacity/2)?.1:e}}).attr("stroke",function(t){return s.dot.stroke}).attr("stroke-width",function(t){return s.dot.strokeWidth});u=this.g.view.selectAll("text.label").data((this.cfg.label||{}).enabled?this.parsed:[]);u.exit().remove();u.enter().append("text").attr("class",function(){var t,e;t=((s.label||{}).font||{}).family;return"label "+((e=t)?e.className||"":"")}).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("transform",function(t,e){return"translate("+t.px+","+t.py+")"}).style("opacity",0).attr("font-size",0);this.g.view.selectAll("text.label").attr("font-size",((s.label||{}).font||{}).size||".75em").style("pointer-events",function(t){if(t.labelCapped){return"none"}else{return""}}).text(function(t,e){if(g.binding.label){return t.label||""}else{return t.name||""}}).each(function(t){var e;e=this.getBBox();t.node.w=e.width;return t.node.h=e.height});this.g.view.selectAll("text.label").transition().duration(350).style("opacity",function(t){if(t.labelCapped){return 0}else{return 1}});l=_corr(this.parsed.filter(function(t,e){return!(n.cat!=null)||i.isSelected(t.cat)}));d=r.x.domain(),c=d[0],f=d[1];d=[c,f].map(function(t){return t*l[1]+l[0]}),h=d[0],y=d[1];if(h<r.y.domain()[0]){h=r.y.domain()[0];c=(h-l[0])/(l[1]||1)}if(y>r.y.domain()[1]){y=r.y.domain()[1];f=(y-l[0])/(l[1]||1)}d=[r.x(c),r.x(f),r.y(h),r.y(y)],c=d[0],f=d[1],h=d[2],y=d[3];x=isNaN(c)||isNaN(f)||isNaN(h)||isNaN(y)||!(l[0]||l[1])||!s.regression.enabled;this.regression.transition("regression").duration(350).attr("x1",x?0:c).attr("x2",x?0:f).attr("y1",x?0:h).attr("y2",x?0:y).attr("opacity",x?0:s.regression.opacity).attr("stroke",s.regression.stroke).attr("stroke-width",s.regression.strokeWidth).attr("stroke-dasharray",s.regression.strokeDasharray);p=t.map(function(t){return{x:t.x,y:t.y,order:t.order}});p.sort(function(t,e){if(t.order<e.order){return-1}else if(t.o>e.o){return 1}else{return 0}});this.trend.attr("d",function(){return e(p)}).attr("fill","none").attr("opacity",s.trend.enabled?1:0).attr("stroke",s.trend.stroke).attr("stroke-width",s.trend.strokeWidth).attr("stroke-dasharray",s.trend.strokeDasharray).attr("stroke-linecap",s.trend.cap).attr("stroke-linejoin",s.trend.join);m=s.trend.strokeDasharray.split(" ").filter(function(t){return t!=null}).reduce(function(t,e){return t+ +e},0);this.trendAni.attr("values",m+";0");this.legend.render();this.yaxis.render();this.xaxis.render();if((this.cfg.label||{}).enabled){return this.start()}},tick:function(){var t,e,n,r,a,i,s;t=this.data,e=this.line,n=this.binding,r=this.scale,a=this.tint,i=this.legend,s=this.cfg;if(!(this.cfg.label||{}).enabled){return}this._tick=(this._tick||0)+1;return this.g.view.selectAll("text.label").attr("transform",function(t){return"translate("+t.node.x+","+t.node.y+")"})}}};function import$(t,e){var n={}.hasOwnProperty;for(var r in e)if(n.call(e,r))t[r]=e[r];return t}</script><div plug="layout"><div class="pdl-layout"><div data-type="layout"><div class="pdl-cell" data-name="yaxis">&nbsp;</div><div class="pdl-cell" data-name="view"></div><div class="pdl-cell"></div><div class="pdl-cell" data-name="xaxis">&nbsp;</div><div class="pdl-cell" data-name="legend">&nbsp;</div></div><div data-type="render"></div></div></div></div>